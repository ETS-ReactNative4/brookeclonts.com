!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.w={},n(n.s=28)}([function(e,t){e.exports=require("express")},function(e,t,n){var s=n(7);s.Promise=global.Promise;s.connect(process.env.MONGODB_URI,{useMongoClient:!0,autoIndex:!1,reconnectTries:10,reconnectInterval:500,poolSize:10,bufferMaxEntries:0}).then(function(){},function(e){console.log("".concat(e,": unable to connect to db"))}),e.exports={mongoose:s}},function(e,t){e.exports=require("request")},function(e,t,n){var s=n(6);e.exports=function(e,t,n){var o=e.body.token||e.query.token||e.headers["x-access-token"];if(!o)return t.status(403).send({success:!1,message:"No token provided."});s.verify(o,process.env.SECRET,function(s,o){if(s)return t.json({success:!1,message:"Failed to authenticate token."});e.decoded=o,n()})}},function(e,t){e.exports=require("mongodb")},function(e,t){e.exports=require("bcrypt")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("multer-s3")},function(e,t){e.exports=require("aws-sdk")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("mime")},function(e,t){e.exports=require("multer")},function(e,t,n){var s=n(0),o=n(2),i=s.Router(),r=n(12),a=n(11),u=(n(10),n(9)),c=n(8),d=process.env.AWS_ACCESS_KEY||"xxxxxx",l=process.env.AWS_SECRET_KEY||"+xxxxxx+B+xxxxxxx",p=process.env.AWS_BUCKET||"brookeclonts";u.config.update({accessKeyId:d,secretAccessKey:l,region:"us-west-1"});var f=new u.S3,m=r({storage:c({s3:f,bucket:p,acl:"public-read",metadata:function(e,t,n){n(null,{fieldName:t.fieldname})},key:function(e,t,n){n(null,"blog/".concat(Date.now(),".").concat(a.getExtension(t.mimetype)))}})}),g=r({storage:c({s3:f,bucket:p,acl:"public-read",metadata:function(e,t,n){n(null,{fieldName:t.fieldname})},key:function(e,t,n){n(null,"books/".concat(Date.now(),".").concat(a.getExtension(t.mimetype)))}})}),y=r({storage:c({s3:f,bucket:p,acl:"public-read",metadata:function(e,t,n){n(null,{fieldName:t.fieldname})},key:function(e,t,n){n(null,"projects/".concat(Date.now(),".").concat(a.getExtension(t.mimetype)))}})}),h=function(e,t,n){var s={Bucket:p,Key:e};f.deleteObject(s,function(e,t){e&&console.log("delete image from s3 error: ".concat(e))})};i.post("/book/upload",g.single("file"),function(e,t){t.send({path:e.file.key})}),i.post("/post/upload",m.single("file"),function(e,t,n){t.send({path:e.file.key})}),i.post("/project/upload",y.single("file"),function(e,t,n){t.send({path:e.file.key})}),i.put("/book/upload",m.single("file"),function(e,t){var n=e.body;n?(h(n),t.send({path:e.file.key})):t.status(404).send({message:"Please send original file to be replaced."})}),i.put("/post/upload",m.single("file"),function(e,t){var n=e.body;if(n)return h(n),t.send({path:t.req.file.key});t.status(404).send({message:"Please send original file to be replaced."})}),i.put("/project/upload",y.single("file"),function(e,t){var n=e.body;n?(h(n),t.send({path:e.file.key})):t.status(404).send({message:"Please send original file to be replaced."})}),i.post("/mailchimp",function(e,t){var n=process.env.MAILCHIMP_KEY,s=n.split("-")[1],i={uri:"https://".concat(s,".api.mailchimp.com/3.0/lists/b762b0fa4f/members"),method:"POST",json:{email_address:e.body.email,status:"subscribed",merge_fields:{FNAME:e.body.fName,LNAME:e.body.lName}},headers:{Authorization:"".concat("user"," ").concat(n),"Content-Type":"application/json; charset=utf-8"}};o(i,function(e,n,s){e?t.send(e):t.send(n)})}),i.get("/instagram",function(e,t){var n=process.env.INSTAGRAM_ACCESS,s={uri:"https://api.instagram.com/v1/users/self/media/recent/?access_token=".concat(n),method:"GET"};o(s,function(e,n,s){e?t.send(e):t.send(n.body)})}),e.exports=i},function(e,t,n){var s=n(7),o=s.Schema,i=n(5),r=new o({name:String,email:String,password:String});r.methods.generateHash=function(e){return i.hashSync(e,10,i.genSaltSync(8),null)},r.methods.validPassword=function(e){return i.compareSync(e,this.password)},r.set("collection","users");var a=s.model("users",r);e.exports=a},function(e,t,n){var s=n(0),o=(n(2),n(1),n(14)),i=s.Router(),r=(n(5),n(6));i.post("/",function(e,t){var n=e.body.email,s=e.body.password;if(!n||!s)return t.status(401).send({success:!1,message:"Oops! I did not get that."});o.findOne({email:n},function(e,n){if(e)return t.status(401).send({success:!1,message:"Oops! ".concat(e)});if(!n)return t.status(401).send({success:!1,message:"Oops! User not found."});if(!n.validPassword(s))return t.status(400).send({success:!1,message:"Oops! Wrong password."});var o=r.sign({name:n.name},process.env.SECRET,{expiresIn:86400});t.status(200).send({success:!0,message:"Success!",token:o})})}),e.exports=i},function(e,t,n){var s=n(1).mongoose,o=new(0,s.Schema)({title:{type:String,required:!0,minlength:1,trim:!0},description:{type:String,default:"",trim:!0},url:{type:String,required:!0,default:""},img:{type:String,required:!0,default:""}});o.set("collection","projects");var i=s.model("projects",o);e.exports=i},function(e,t,n){var s=n(0),o=(n(2),n(1),n(16)),i=n(4),r=s.Router(),a=n(3);r.get("/",function(e,t){o.find().then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.post("/",a,function(e,t){var n=e.body;new o({title:n.title,description:n.description,url:n.url,img:n.img}).save().then(function(e){t.send(e)},function(e){t.status(400).send(e)})}),r.patch("/:id",a,function(e,t){var n=e.params.id,s=e.body.values;o.findOneAndUpdate({_id:n},{$set:s},{new:!0}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.get("/admin",function(e,t){o.find({},{title:1}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.delete("/:id",function(e,t){var n=e.params.id;if(!i.isValid(n))return t.status(404).send();o.findByIdAndRemove(n).then(function(e){return e?t.status(200).send(e):t.status(404).send()}).catch(function(e){return t.status(400).send()})}),e.exports=r},function(e,t,n){var s=n(1).mongoose,o=new(0,s.Schema)({title:{type:String,required:!0,minlength:1,trim:!0},description:{type:String,required:!0,minlength:1,trim:!0},body:{type:String,required:!0,minlength:1,trim:!0},imageUrl:{type:String,required:!0,default:""},attachmentUrl:{type:String,required:!1,default:null}});o.set("collection","blogposts");var i=s.model("blogposts",o);e.exports=i},function(e,t,n){var s=n(0),o=(n(2),n(1),n(18)),i=n(4),r=s.Router(),a=n(3);r.get("/",function(e,t){o.find().then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.get("/admin",function(e,t){o.find({},{title:1}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.get("/one",function(e,t){o.find().sort({_id:-1}).limit(1).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.get("/title/:title",function(e,t){var n=e.params.title;o.findOne({title:n}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.get("/:id",function(e,t){var n=e.params.id;e.params.title;o.findOne({_id:n}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.patch("/:id",a,function(e,t){var n=e.params.id,s=e.body;o.findOneAndUpdate({_id:n},{$set:s},{new:!0}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.post("/",a,function(e,t){var n=e.body;new o({title:n.title,description:n.description,body:n.body,imageUrl:n.imageUrl,attachmentUrl:n.attachmentUrl}).save().then(function(e){t.send(e)},function(e){t.status(400).send(e)})}),r.delete("/:id",a,function(e,t){var n=e.params.id;if(!i.isValid(n))return t.status(404).send();o.findByIdAndRemove(n).then(function(e){return e?t.status(200).send(e):t.status(404).send()}).catch(function(e){return t.status(400).send()})}),e.exports=r},function(e,t,n){var s=n(1).mongoose,o=new(0,s.Schema)({title:{type:String,required:!0,minlength:1,trim:!0},description:{type:String,default:"",trim:!0},status:{type:String,default:""},imageUrl:{type:String,required:!0,default:""},platforms:{type:String,default:""}});o.set("collection","books");var i=s.model("books",o);e.exports=i},function(e,t,n){var s=n(0),o=(n(2),n(1),n(20)),i=n(4),r=s.Router(),a=n(3);r.get("/",function(e,t){o.find().then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.post("/",function(e,t){var n=e.body;new o({title:n.title,description:n.description,status:n.status,imageUrl:n.imageUrl}).save().then(function(e){t.send(e)},function(e){t.status(400).send(e)})}),r.get("/admin",function(e,t){o.find({},{title:1}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),r.delete("/:id",a,function(e,t){var n=e.params.id;if(!i.isValid(n))return t.status(404).send();o.findByIdAndRemove(n).then(function(e){return e?t.status(200).send(e):t.status(404).send()}).catch(function(e){return t.status(400).send()})}),r.post("/",a,function(e,t){var n=e.body;new o({title:n.title,description:n.description,status:n.status,imageUrl:n.imageUrl,platforms:n.platforms}).save().then(function(e){t.send(e)},function(e){t.status(400).send(e)})}),r.patch("/:id",a,function(e,t){var n=e.params.id,s=e.body.values;o.findOneAndUpdate({_id:n},{$set:s},{new:!0}).then(function(e){t.setHeader("content-type","application/json"),t.status(200).send(e)},function(e){t.status(400).send(e)})}),e.exports=r},function(e,t){e.exports=require("cors")},function(e,t,n){n(0).Router()},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,n){"use strict";n.r(t);var s=n(0),o=n.n(s),i=(n(27),n(26)),r=n(25),a=n(24);n(23);var u=n(21),c=n(19),d=n(17),l=n(15),p=n(13),f=process.env.PORT||3e3,m=o()();m.use(i("dev")),m.use(a.json({limit:"50mb"})),m.use(a.urlencoded({extended:!1,limit:"50mb"})),m.use(r()),m.use("/api/users",l),m.use("/api/books",u),m.use("/api/projects",d),m.use("/api/blogposts",c),m.use("/api/external",p),m.use("/favicon.ico",o.a.static("src/browser/Icons/favicon.ico")),m.use(o.a.static("public")),m.get("*",function(e,t,n){t.send('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n          <meta name="theme-color" content="#000000">\n          <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans|Medula+One">\n          <title>Brooke Clonts Author Website</title>\n            <script src="/bundle.js" defer><\/script>\n          <style>\n            body {\n              margin: 0;\n              padding: 0;\n              font-family: sans-serif;\n            }\n            </style>\n        </head>\n  \n        <body>\n          <div id="app"/>\n        </body>\n      </html>\n    ')}),m.listen(f,function(){console.log("Server is listening on port: 3000")})}]);